@model DataLayer.Models.TblOrder
@{
    ViewData["Title"] = "سبد خرید";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}
<link href="~/StyleCenter/Sass/Home/Bascket.min.css" rel="stylesheet" />
@if (Model != null)
{
    <div class="my-space"></div>
    <div class="matCart my-column my-clipped">
        <div class="formTitr my-row uk-margin-top" dir="rtl">
            <h3 class="center">سبد خرید</h3>
            <a><span class="icon-holder" uk-icon="backIcon"></span></a>
        </div>
        <div class="my-column cart-section uk-padding-small" dir="rtl">
            @foreach (var item in Model.TblOrderDetails)
            {
                <div class="my-row ShoppingList" dir="rtl">
                    <label>@item.Product.Name</label>
                    <label class="uk-text-danger">@((item.Product.Price*item.Product.Count).ToString("#,0 تومان"))</label>
                    <div class="Count">
                        <a onclick="UpProduct(@item.Id)"><span class="icon-holder uk-margin-small-left" uk-icon="add"></span></a>
                        <span>@item.Count</span>
                        <a onclick="DownProduct(@item.Id)"><span class="icon-holder uk-margin-small-right" uk-icon="remove"></span></a>
                    </div>
                </div>
                <hr />
            }
            <hr class="uk-divider-icon uk-margin-remove-bottom" />
            <div class="uk-margin-small-right" dir="rtl">
                <label class="uk-margin-small-bottom" for="delivery">انتخاب نحوه تحویل و تسویه:</label>
                <div class="delivery uk-grid-small uk-child-width-auto uk-grid">
                    @if (Model.Store.Ability.TahvilVaTasvieDarMahal == 1)
                    {
                        <label><input class="uk-checkbox uk-margin-remove-top" type="radio" name="delivery"> تحویل و تسویه درب منزل</label>
                    }
                    @if (Model.Store.Ability.TahvilVaTasvieDarForushgah == 1)
                    {
                        <label><input class="uk-checkbox uk-margin-remove-top" type="radio" name="delivery" checked> تحویل و تسویه در محل فروشگاه</label>
                    }
                </div>
            </div>
            <hr class="uk-divider-icon uk-margin-remove-top" />
            <input id="Discount" class="uk-input uk-border-rounded" type="text" placeholder="کد تخفیف (در صورت وجود)..">
            <label class="uk-text-danger center uk-margin-top">قیمت مجموع سفارشات: <span>@Model.Price.ToString("#,0 ") هزار تومان</span></label>
            <button onclick="Final(@Model.Id)" class="gradientButton center uk-margin-top uk-margin-bottom">تکمیل سفارش و ارسال برای فروشنده</button>
            <script>
                function Final(Id) {
                    $.post("/Order/Final?Id=" + Id, function (result) {
                        if (result == "true") {
                            window.location.href = "";
                        }
                    });
                }
            </script>
        </div>
    </div>
    <div class="my-space"></div>
}
else
{
    <div class="my-space"></div>
    <div class="matCart my-column my-clipped">
        <div class="formTitr my-row uk-margin-top" dir="rtl">
            <h3 class="center">سبد خرید</h3>
            <a><span class="icon-holder" uk-icon="backIcon"></span></a>
        </div>
        <div class="my-column cart-section uk-padding-small" dir="rtl">

            <div class="my-row ShoppingList" dir="rtl">
                <label></label>
                <label class="uk-text-danger">سبد خرید شما خالی است</label>
                <div class="Count">

                </div>
            </div>
            <img class="EmptyCart uk-margin-top uk-margin-bottom center" src="~/img/user/empty_cart.svg" width="500" />
        </div>
    </div>
    <div class="my-space"></div>
}

<script id="Command">
    function UpProduct(Id) {
        $.post("/Order/Command?Id=" + Id + "&Command=up", function (result) {
            if (result == "true") {
                window.location.reload();
            }
        });
    }
    function DownProduct(Id) {
        $.post("/Order/Command?Id=" + Id + "&Command=down", function (result) {
            if (result == "true") {
                window.location.reload();
            }
        });
    }
</script>

